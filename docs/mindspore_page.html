
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Ascend- AI Cluster Mindspore Environment Guide &#8212; HAICGU 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/agogo.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">HAICGU 0.1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ascend-ai-cluster-mindspore-environment-guide">
<h1>Ascend- AI Cluster Mindspore Environment Guide<a class="headerlink" href="#ascend-ai-cluster-mindspore-environment-guide" title="Permalink to this heading">¶</a></h1>
<section id="mindspore">
<h2>1 - MindSpore<a class="headerlink" href="#mindspore" title="Permalink to this heading">¶</a></h2>
<p>Through community cooperation, this open Al framework best matches with Ascend processors and supports multi-processor architectures for all scenarios. It brings data scientists, algorithm engineers, and developers with friendly development, efficient running, and flexible deployment, and boosts the development of the Al software and hardware ecosystem.</p>
<p>Official Page: <a href="#id3"><span class="problematic" id="id4">Mindspore_</span></a></p>
</section>
<section id="mindspore-environment-module-load">
<h2>2 - MindSpore Environment Module Load<a class="headerlink" href="#mindspore-environment-module-load" title="Permalink to this heading">¶</a></h2>
<section id="predownloaded-module-load">
<h3>2.1 - Predownloaded Module Load<a class="headerlink" href="#predownloaded-module-load" title="Permalink to this heading">¶</a></h3>
<p>Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">GCC</span><span class="o">/</span><span class="mf">9.5.0</span> <span class="n">OpenMPI</span> <span class="n">MindSpore</span>
</pre></div>
</div>
<p>Quick Check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">srun</span> <span class="o">-</span><span class="n">p</span> <span class="n">a800</span><span class="o">-</span><span class="mi">9000</span> <span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;from mindspore import context;context.set_context(mode=context.GRAPH_MODE, device_target=&quot;Ascend&quot;)&#39;</span>
</pre></div>
</div>
</section>
<section id="pip-installation">
<h3>2.2 - pip installation<a class="headerlink" href="#pip-installation" title="Permalink to this heading">¶</a></h3>
<p>Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">mindspore</span><span class="o">-</span><span class="n">ascend</span><span class="o">==</span><span class="mf">1.6.2</span>
</pre></div>
</div>
<p>Quick Check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">srun</span> <span class="o">-</span><span class="n">p</span> <span class="n">a800</span><span class="o">-</span><span class="mi">9000</span> <span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;from mindspore import context;context.set_context(mode=context.GRAPH_MODE, device_target=&quot;Ascend&quot;)&#39;</span>
</pre></div>
</div>
<p>Note: Path export may require if the required environment variable not declared before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export LD_LIBRARY_PATH=$ASCEND_OPP_PATH/op_impl/builtin/ai_core/tbe/op_tiling:$LD_LIBRARY_PATH
</pre></div>
</div>
</section>
</section>
<section id="code-examples-for-testing">
<h2>3 - Code Examples for Testing<a class="headerlink" href="#code-examples-for-testing" title="Permalink to this heading">¶</a></h2>
<section id="example-1">
<h3>3.1 - Example 1<a class="headerlink" href="#example-1" title="Permalink to this heading">¶</a></h3>
<p>Code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">srun</span> <span class="o">-</span><span class="n">p</span> <span class="n">a800</span><span class="o">-</span><span class="mi">9000</span> <span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import mindspore;mindspore.run_check()&quot;</span>
</pre></div>
</div>
<p>Output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MindSpore version: 1.6.2
The result of multiplication calculation is correct, MindSpore has been installed successfully!
</pre></div>
</div>
</section>
<section id="example-2">
<h3>3.2 - Example 2<a class="headerlink" href="#example-2" title="Permalink to this heading">¶</a></h3>
<p>Code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.ops</span> <span class="k">as</span> <span class="nn">ops</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">device_target</span><span class="o">=</span><span class="s2">&quot;Ascend&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>Output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]]</span> <span class="p">[[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]]</span> <span class="p">[[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span> <span class="mf">2.</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>For more examples, check <a href="#id5"><span class="problematic" id="id6">MindSpore_</span></a> 1.6.2 Documentation</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="access.html">Access to HAICGU</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Cluster usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide_huawei_aifae.html">Ascend- AI Cluster Quick Environment Setup &amp; User Guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/mindspore_page.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, OEHI.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>